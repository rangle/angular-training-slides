<!DOCTYPE HTML>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="search-domain" content="http://rangle.io" />
    <link href="http://localhost:4000/css/bootstrap.css" rel="stylesheet" />
    <link href="http://localhost:4000/css/bootstrap-theme.css" rel="stylesheet" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Reactive Forms</title>
  </head>
  <body>
    <div class="container shadow">
      <div class="row-fluid">
        <div class="span10 offset1">
          <p><a href="http://rangle.io">Rangle.io</a> Angular Training</a></p>
          <h1>Reactive Forms</h1>
          <hr />
<!-- .slide: id="reactive-forms-roadmap" -->
<h2 id="roadmap">Roadmap</h2>

<ol>
  <li>How do reactive forms differ from template driven forms?</li>
  <li>How do I create a reactive form?</li>
  <li>How do I validate a reactive form?</li>
  <li>How can I create my own validators?</li>
</ol>

<hr />
<!-- .slide: id="reactive-forms-overview" -->
<h2 id="overview-again">Overview (again)</h2>

<ul>
  <li>Template Driven Forms: controls and validation rules defined in the template with directives</li>
  <li>Reactive Forms: controls and validation rules defined in the component class or service
    <ul>
      <li>Binding a form to a model</li>
      <li>Also known as model driven forms</li>
    </ul>
  </li>
  <li>Reactive forms can handle controls directly within the component
    <ul>
      <li>Push data to the controls and pull values as they change</li>
    </ul>
  </li>
  <li>Do <em>not</em> use <code class="highlighter-rouge">ngModel</code> and <code class="highlighter-rouge">required</code> in the template</li>
  <li>Define the validation and model as part of our component</li>
</ul>

<hr />
<!-- .slide: id="reactive-forms-creating" -->
<h2 id="creating-reactive-forms">Creating Reactive Forms</h2>

<ul>
  <li>Import <code class="highlighter-rouge">ReactiveFormsModule</code> from <code class="highlighter-rouge">@angular/forms</code> into <code class="highlighter-rouge">app.module.ts</code></li>
</ul>

<p><em>src/app/app.module.ts</em></p>
<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">FormsModule</span><span class="p">,</span> <span class="nx">ReactiveFormsModule</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/forms'</span><span class="p">;</span>

<span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span>
  <span class="na">declarations</span><span class="p">:</span> <span class="p">[</span>
    <span class="c1">// ...</span>
  <span class="p">],</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="c1">// ...</span>
    <span class="nx">ReactiveFormsModule</span>
  <span class="p">],</span>
  <span class="na">providers</span><span class="p">:</span> <span class="p">[],</span>
  <span class="na">bootstrap</span><span class="p">:</span> <span class="p">[</span><span class="nx">AppComponent</span><span class="p">]</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kr">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="reactive-forms-declaring-1" -->
<h2 id="declaring-a-reactive-form">Declaring a Reactive Form</h2>

<ul>
  <li>Reactive Forms are declared using the <code class="highlighter-rouge">FormBuilder</code> service</li>
  <li><code class="highlighter-rouge">FormControl</code> tracks the value, state and validity of a form control</li>
  <li><code class="highlighter-rouge">FormGroup</code> tracks the group and validity state of a group of FormControls</li>
  <li>Use the <code class="highlighter-rouge">FormBuilder</code> service to create <code class="highlighter-rouge">FormGroup</code> and <code class="highlighter-rouge">FormControl</code> instances</li>
  <li>We will rebuild our <code class="highlighter-rouge">GenericInputComponent</code> to use these
    <ul>
      <li>Will get compilation errors until modifications complete</li>
    </ul>
  </li>
</ul>

<hr />
<!-- .slide: id="reactive-forms-declaring-2" -->
<h2 id="declaring-a-reactive-form-1">Declaring a Reactive Form</h2>

<p><em>src/app/generic-input/generic-input.component.ts</em></p>
<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">FormBuilder</span><span class="p">,</span> <span class="nx">FormGroup</span><span class="p">,</span> <span class="nx">FormControl</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/forms'</span><span class="p">;</span>

<span class="k">export</span> <span class="kr">class</span> <span class="nx">GenericInputComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>

  <span class="err">@</span><span class="nx">Output</span><span class="p">()</span> <span class="nx">newItem</span><span class="err">:</span> <span class="nx">EventEmitter</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventEmitter</span><span class="p">();</span>
  <span class="nl">textEntryForm</span><span class="p">:</span> <span class="nx">FormGroup</span><span class="p">;</span>
  <span class="nl">textEntryControl</span><span class="p">:</span> <span class="nx">FormControl</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span>
    <span class="k">private</span> <span class="nx">builder</span><span class="err">:</span> <span class="nx">FormBuilder</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">textEntryControl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormControl</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="p">[]);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">textEntryForm</span> <span class="o">=</span> <span class="nx">builder</span><span class="p">.</span><span class="nx">group</span><span class="p">({</span>
      <span class="na">textEntry</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">textEntryControl</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="reactive-forms-modifying-the-view" -->
<h2 id="modifying-the-view">Modifying the View</h2>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;form</span> <span class="err">[</span><span class="na">formGroup</span><span class="err">]="</span><span class="na">textEntryForm</span><span class="err">"</span> <span class="err">(</span><span class="na">ngSubmit</span><span class="err">)="</span><span class="na">addToDo</span><span class="err">()"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>
    Item: <span class="nt">&lt;input</span> <span class="err">[</span><span class="na">formControl</span><span class="err">]="</span><span class="na">textEntryControl</span><span class="err">"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Add<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre>
</div>

<ul>
  <li>Unlike template driven forms, we do not use <code class="highlighter-rouge">required</code> or <code class="highlighter-rouge">ngModel</code></li>
  <li>Also not creating any template variables</li>
</ul>

<hr />
<!-- .slide: id="reactive-forms-validating-1" -->
<h2 id="validating-reactive-forms">Validating Reactive Forms</h2>

<ul>
  <li>Angular provides <code class="highlighter-rouge">required</code>, <code class="highlighter-rouge">maxLength</code>, <code class="highlighter-rouge">minLength</code>, and <code class="highlighter-rouge">pattern</code> validators</li>
  <li>Validators produce errors which can be checked by calling <code class="highlighter-rouge">hasError</code> on the <code class="highlighter-rouge">FormControl</code></li>
</ul>

<p><em>src/app/generic-input/generic-input.components.ts</em></p>
<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">FormBuilder</span><span class="p">,</span> <span class="nx">FormGroup</span><span class="p">,</span> <span class="nx">FormControl</span><span class="p">,</span> <span class="nx">Validators</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/forms'</span><span class="p">;</span>

<span class="k">export</span> <span class="kr">class</span> <span class="nx">GenericInputComponent</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(...)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">textEntryControl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormControl</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">minLength</span><span class="p">(</span><span class="mi">5</span><span class="p">)]);</span>
    <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="reactive-forms-validating-2" -->
<h2 id="validating-reactive-forms-1">Validating Reactive Forms</h2>

<ul>
  <li>Now use the validator in the form’s HTML</li>
</ul>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;ul</span> <span class="err">[</span><span class="na">hidden</span><span class="err">]="</span><span class="na">textEntryControl</span><span class="err">.</span><span class="na">valid</span> <span class="err">||</span> <span class="na">textEntryControl</span><span class="err">.</span><span class="na">untouched</span><span class="err">"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;li</span> <span class="err">[</span><span class="na">hidden</span><span class="err">]="!</span><span class="na">textEntryControl</span><span class="err">.</span><span class="na">hasError</span><span class="err">('</span><span class="na">minlength</span><span class="err">')"</span><span class="nt">&gt;</span>
    Item must have at least five characters
  <span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre>
</div>

<!-- preview: https://plnkr.co/edit/m8cTaN?p=preview -->

<hr />
<!-- .slide: id="reactive-forms-custom-validators-1" -->
<h2 id="custom-validators">Custom Validators</h2>

<ul>
  <li>Can also provide custom validators to <code class="highlighter-rouge">FormControl</code> that return:
    <ul>
      <li><code class="highlighter-rouge">null</code> if the field is valid</li>
      <li><code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">validatorName:</span><span class="w"> </span><span class="err">true</span><span class="w"> </span><span class="p">}</span></code> if it is not</li>
    </ul>
  </li>
</ul>

<p><em>src/app/generic-input.component.ts</em></p>
<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">FormControl</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/form'</span><span class="p">;</span>

<span class="k">export</span> <span class="kr">class</span> <span class="nx">CustomValidators</span> <span class="p">{</span>
  <span class="k">static</span> <span class="nx">timeFormat</span><span class="p">(</span><span class="nx">ctrl</span><span class="err">:</span> <span class="nx">FormControl</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">pattern</span><span class="err">:</span> <span class="nb">RegExp</span> <span class="o">=</span> <span class="sr">/</span><span class="se">\d\d</span><span class="sr">:</span><span class="se">\d\d</span><span class="sr">/</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">pattern</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">ctrl</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="p">?</span> <span class="kc">null</span> <span class="p">:</span> <span class="p">{</span><span class="na">timeFormat</span><span class="p">:</span> <span class="kc">true</span><span class="p">};</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<ul>
  <li>Note: validators can also be defined as plain functions</li>
  <li>And we really ought to put our validators in their own files…</li>
</ul>

<hr />
<!-- .slide: id="reactive-forms-custom-validators-2" -->
<h2 id="custom-validators-1">Custom Validators</h2>

<ul>
  <li>Validate a field by adding <code class="highlighter-rouge">timeFormat.hasError('timeFormat')</code> to the <code class="highlighter-rouge">FormControl</code> constructor</li>
</ul>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="err">@</span><span class="nx">Component</span><span class="p">({</span> <span class="p">...</span> <span class="p">})</span>
<span class="k">export</span> <span class="kr">class</span> <span class="nx">GenericInputComponent</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(...)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">textEntryControl</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormControl</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="p">[</span> <span class="nx">CustomValidators</span><span class="p">.</span><span class="nx">timeFormat</span> <span class="p">]);</span>
    <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<ul>
  <li>And display an error message</li>
</ul>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;li</span> <span class="err">[</span><span class="na">hidden</span><span class="err">]="!</span><span class="na">textEntry</span><span class="err">.</span><span class="na">hasError</span><span class="err">('</span><span class="na">timeFormat</span><span class="err">')"</span><span class="nt">&gt;</span>
  Invalid time format
<span class="nt">&lt;/li&gt;</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="reactive-forms-custom-validators-3" -->
<h2 id="custom-validators-2">Custom Validators</h2>

<p><img src="images/screenshot-invalid-time-format.png" alt="Custom Validators" /></p>

<!-- preview: https://plnkr.co/edit/m6heM7?p=preview -->

<hr />
<!-- .slide: id="reactive-forms-separating-forms-into-logical-sections" -->
<h2 id="separating-forms-into-logical-sections">Separating Forms into Logical Sections</h2>

<ul>
  <li>Dividing large forms into sections makes it easier to track validation issues
    <ul>
      <li>Allows us to query individual groups to narrow down invalid controls</li>
    </ul>
  </li>
  <li>Also useful for creating a form from a schema</li>
  <li>To group the sections, we need to use <code class="highlighter-rouge">FormGroup</code>
    <ul>
      <li>Which means using reactive forms</li>
    </ul>
  </li>
  <li>We can create nested <code class="highlighter-rouge">FormGroup</code>s within other <code class="highlighter-rouge">FormGroup</code>s</li>
</ul>

<hr />
<!-- .slide: id="reactive-forms-start-with-a-model" -->
<h2 id="start-with-a-model">Start With a Model</h2>

<ul>
  <li>We want to turn this data structure into an Angular form</li>
</ul>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="p">{</span>
  <span class="s2">"responsible"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"name"</span><span class="err">:</span> <span class="s2">"Zuko"</span><span class="p">,</span>
    <span class="s2">"email"</span><span class="err">:</span> <span class="s2">"zuko@fire.org"</span>
  <span class="p">},</span>
  <span class="s2">"task"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"text"</span><span class="err">:</span> <span class="s2">"..."</span><span class="p">,</span>
    <span class="s2">"estimate"</span><span class="err">:</span> <span class="s2">"3:00"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="reactive-forms-converting-to-code" -->
<h2 id="converting-to-code">Converting to Code</h2>

<ul>
  <li>Turn the logical structure into a class</li>
  <li>Create a new component for this using <code class="highlighter-rouge">ng generate component structuredForm</code></li>
  <li>Add variables to represent the parts of the form</li>
</ul>

<p><em>src/app/structured-form/structured-form.component.ts</em></p>
<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">export</span> <span class="kr">class</span> <span class="nx">StructuredFormComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="nl">mainForm</span><span class="p">:</span> <span class="nx">FormGroup</span><span class="p">;</span>

  <span class="nl">responsible</span><span class="p">:</span> <span class="nx">FormGroup</span><span class="p">;</span>
  <span class="nl">name</span><span class="p">:</span> <span class="nx">FormControl</span><span class="p">;</span>
  <span class="nl">email</span><span class="p">:</span> <span class="nx">FormControl</span><span class="p">;</span>

  <span class="nl">task</span><span class="p">:</span> <span class="nx">FormGroup</span><span class="p">;</span>
  <span class="nl">text</span><span class="p">:</span> <span class="nx">FormControl</span><span class="p">;</span>
  <span class="nl">estimate</span><span class="p">:</span> <span class="nx">FormControl</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="reactive-forms-building-the-form-1" -->
<h2 id="building-the-form">Building the Form</h2>

<ul>
  <li>Inject <code class="highlighter-rouge">FormBuilder</code> via our constructor</li>
</ul>

<p><em>src/app/structured-form/structured-form.component.ts</em></p>
<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">export</span> <span class="kr">class</span> <span class="nx">StructuredFormComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="c1">// ...as before...</span>

<span class="kd">constructor</span><span class="p">(</span>
    <span class="k">private</span> <span class="nx">builder</span><span class="err">:</span> <span class="nx">FormBuilder</span>
  <span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="reactive-forms-building-the-form-2" -->
<h2 id="building-the-form-1">Building the Form</h2>

<ul>
  <li>Use helper methods to create each form group’s controls</li>
</ul>

<p><em>src/app/structured-form/structured-form.component.ts</em></p>
<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">export</span> <span class="kr">class</span> <span class="nx">StructuredFormComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>
  <span class="c1">// ...as before...</span>

  <span class="nx">createResponsibleFormFields</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormControl</span><span class="p">(</span><span class="s1">'Zuko'</span><span class="p">,</span> <span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">]);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">email</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FormControl</span><span class="p">(</span><span class="s1">'zuko@fire.org'</span><span class="p">,</span> <span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">]);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">responsible</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">builder</span><span class="p">.</span><span class="nx">group</span><span class="p">({</span>
      <span class="na">name</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
      <span class="na">email</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">email</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<ul>
  <li>The other group is built the same way</li>
</ul>

<hr />
<!-- .slide: id="reactive-forms-building-the-form-3" -->
<h2 id="building-the-form-2">Building the Form</h2>

<ul>
  <li>Add the sub-groups to the main form once they have been created</li>
</ul>

<p><em>src/app/structured-form/structured-form.component.ts</em></p>
<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">export</span> <span class="kr">class</span> <span class="nx">StructuredFormComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>

  <span class="kd">constructor</span><span class="p">(</span>
    <span class="k">private</span> <span class="nx">builder</span><span class="err">:</span> <span class="nx">FormBuilder</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">createResponsibleFormFields</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">createTaskFormFields</span><span class="p">();</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">mainForm</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">builder</span><span class="p">.</span><span class="nx">group</span><span class="p">({</span>
      <span class="na">responsible</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">responsible</span><span class="p">,</span>
      <span class="na">task</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">task</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<!-- preview: http://plnkr.co/edit/rJ576V7ncL0Fjm3T7zpt?p=preview -->

<hr />
<!-- .slide: id="reactive-forms-using-the-form" -->
<h2 id="using-the-form">Using the Form</h2>

<p><em>src/app/structured-form/structured-form.html</em></p>
<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;form</span> <span class="err">[</span><span class="na">formGroup</span><span class="err">]="</span><span class="na">mainForm</span><span class="err">"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"panel panel-default"</span> <span class="na">formGroupName=</span><span class="s">"responsible"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>
      Name:
      <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">id=</span><span class="s">"name"</span> <span class="err">[</span><span class="na">formControl</span><span class="err">]="</span><span class="na">name</span><span class="err">"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>
      Email:
      <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">type=</span><span class="s">"input"</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">id=</span><span class="s">"email"</span> <span class="err">[</span><span class="na">formControl</span><span class="err">]="</span><span class="na">email</span><span class="err">"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  ...task form group goes here...

  <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="err">(</span><span class="na">click</span><span class="err">)="</span><span class="na">addToDo</span><span class="err">()"</span><span class="nt">&gt;</span>Add<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="reactive-forms-wire-it-up" -->
<h2 id="wire-it-up">Wire It Up</h2>

<ul>
  <li>Throw away most of the data for now…</li>
</ul>

<p><em>src/app/structured-form/structured-form.component.ts</em></p>
<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">export</span> <span class="kr">class</span> <span class="nx">StructuredFormComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>

  <span class="err">@</span><span class="nx">Output</span><span class="p">()</span> <span class="nx">newItem</span><span class="err">:</span> <span class="nx">EventEmitter</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventEmitter</span><span class="p">();</span>

  <span class="nx">addToDo</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">newItem</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">text</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p><em>src/app/app.component.html</em></p>
<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>{{title}}<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;app-to-do-list</span> <span class="err">[</span><span class="na">thingsToDo</span><span class="err">]="</span><span class="na">thingsToDo</span><span class="err">"</span><span class="nt">&gt;&lt;/app-to-do-list&gt;</span>
<span class="nt">&lt;app-structured-form</span> <span class="err">(</span><span class="na">newItem</span><span class="err">)="</span><span class="na">onNewItem</span><span class="err">($</span><span class="na">event</span><span class="err">)"</span><span class="nt">&gt;&lt;/app-structured-form&gt;</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="reactive-forms-appearance" -->
<h2 id="appearance">Appearance</h2>

<p><img src="images/screenshot-grouped-form.png" alt="Form With Groups" /></p>

<hr />
<!-- .slide: id="reactive-forms-shortcuts" -->
<h2 id="shortcuts">ShortCuts</h2>

<ul>
  <li>Our component can also use shortcuts to create a <code class="highlighter-rouge">FormControl</code></li>
</ul>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="nx">createResponsibleFormFields</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">responsible</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">builder</span><span class="p">.</span><span class="nx">group</span><span class="p">({</span>
    <span class="na">name</span><span class="p">:</span> <span class="k">new</span> <span class="nx">FormControl</span><span class="p">(</span><span class="s1">'Zuko'</span><span class="p">,</span> <span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">]),</span>
    <span class="na">email</span><span class="p">:</span> <span class="k">new</span> <span class="nx">FormControl</span><span class="p">(</span><span class="s1">'zuko@fire.org'</span><span class="p">,</span> <span class="p">[</span><span class="nx">Validators</span><span class="p">.</span><span class="nx">required</span><span class="p">])</span>
  <span class="p">});</span>
<span class="p">}</span>
</code></pre>
</div>

          <hr/>
          <a href="http://localhost:4000/">Home</a>
        </div>
      </div>
    </div>
  </body>
</html>
